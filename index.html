<!DOCTYPE html>
<html lang="fr">
  <head>

    <meta charset="utf-8">
    <title>Mon Portfolio</title>
    <link rel="stylesheet" href="index.css">
    <link href="Documents/Prism/prism.css" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/2f326c2d90.js" crossorigin="anonymous"></script>

    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Cuprum&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@200&display=swap" rel="stylesheet">
    <!-- FONTS -->
  </head>

  <body>

    <script src="Documents/Prism/prism.js"></script>
    <!--/////////////////////HEADER////////////////////////////////////////////-->
    <header>
      <a href="QuiSuisJe.html" class="HeaderTitle"> Tanguy DELAGE </a>

      <nav class="HeaderMenu">
        <a href="#" class="NavBar"> Accueil </a>
        <a href="APropos.html" class="NavBar"> À propos </a>
        <div class="Contacts">
          <a href="#ModalContacts" class="ContactsHead"> Contacts </a>
          <ul class="DropDown">
            <li>
              <a href="https://www.linkedin.com/in/tanguy-delage-a085931a0/">
              <i class="fab fa-linkedin"></i>
              </a>
            </li>
            <li><a href="mailto:tanguy.delage@viacesi.fr">
              <i class="fas fa-envelope"></i>
              </a>
            </li>
            <li>
              <a href="#ModalContacts">
              <i class="fas fa-phone-square"></i>
              </a>
            </li>

          </ul>
        </div>
      </nav>
    </header>
    <!--//////////////////////HEADER///////////////////////////////////////////-->
    <!-- ///////////////////Corp du site///////////////////////////////////////-->

    <img src="images/galaxy.jpg" alt="Un univers de possibilités" id="background">

    <div class="Banner">

      <!--///////////////////Bannière de bienvenue/////////////////////////////-->
      <div class="BannerContent">
        <h1> Bienvenue sur mon site portfolio </h1>
        <button onclick="window.location.href = 'QuiSuisJe.html';">
          Qui suis-je ? <br> <span class="ClickMe">clique pour le savoir</span>
        </button>
        <h2> Découvrez mes travaux ainsi que mon univers </h2>
      </div>
      <!--///////////////////Bannière de bienvenue/////////////////////////////-->

      <p class="BannerText">Clickez sur le projet qui vous intéresse pour en savoir plus <br> sur son contenue et les compétences acquises</p>
      <div class="Arrows">
        <i class="fas fa-angle-double-down" id="ArrowRight"></i>
        <i class="fas fa-angle-double-down" id="ArrowLeft"></i>
      </div>

      <!--///////////////////Liste des projets/////////////////////////////////-->
      <div class="BannerList">
        <a href="#ModalCom" class="element">
          <h2>Communication</h2>
          <div class="ProjectImage">
            <img src="images/com.jpg" alt="C'est le projet com">
            <div class="caption">
              <p>En savoir plus sur le projet</p>
            </div>
          </div>
        </a>
        <a href="#ModalBDD" class="element">
          <h2>Base de donnée</h2>
          <div class="ProjectImage">
            <img src="images/BDD.jpg" alt="C'est le projet BDD">
            <div class="caption">
              <p>En savoir plus sur le projet</p>
            </div>
        </div>
        </a>
        <a href="#ModalEmbq" class="element">
          <h2>Système embarqué</h2>
          <div class="ProjectImage">
            <img src="images/Embq.jpg" alt="C'est le projet embarqué">
            <div class="caption">
              <p>En savoir plus sur le projet</p>
            </div>
        </div>
        </a>

        <a href="#" class="element">
          <h2>À venir..</h2>
          <div class="ProjectImage">
            <img src="images/POO.png" alt="C'est le projet com">
            <div class="caption">
              <p>Programmation orientée objet</p>
            </div>
          </div>
        </a>
        <a href="#" class="element">
          <h2>À venir..</h2>
          <div class="ProjectImage">
            <img src="images/Reseau.jpg" alt="C'est le projet BDD">
            <div class="caption">
              <p>Systèmes et Réseaux</p>
            </div>
        </div>
        </a>
        <a href="#" class="element">
          <h2>À venir..</h2>
          <div class="ProjectImage">
            <img src="images/Web.jpg" alt="C'est le projet embarqué">
            <div class="caption">
              <p>Web</p>
            </div>
        </div>
        </a>
      </div>
      <!--///////////////////Liste des projets/////////////////////////////////-->
      <!--////////////////Modales (Contenu projets)///////////////////////////// -->

      <div class="ModalCom" id="ModalCom">
        <div class="ModalContent">
          <a href="#" class="ModalClose"><i class="far fa-times-circle"></i></i></a>
          <h2>Projet Communication</h2>
          <p>
            Ce projet a pour but de faire communiquer deux ordinateurs avec du son sans que personne ne l'entende. Le premier ordinateur envoie des ultrasons qui traverse un mur pour ensuite être capté par un micro. Ce micro est relié par un réseau filaire à l'ordinateur receveur du message.
            <br><br>
            Le projet dans son ensemble m'a permis d'apprendre : <br>
            - Les modulations d'onde (ici sonore), fréquence, amplitude et phase. <br>
            - Les filtres sonores. <br>
            - Les bases des protocoles réseaux. <br>
            - Les bases du langage python. <br>
            <br>
          </p>

          <h3>Modulations</h3>
          <p>
            La modulation du son nous permet de transmettre des bits de données. Nous avons 4 modulations d'amplitude sur 2 bits et 2 modulations de phases sur 1 bit. Ainsi chaque période d'un signal envoie 3 bits de données. Nous envoyons 3 signaux en même temps qui sont porté par une onde ultrasonore. Nous avions donc un débit théorique d'envoie de 72 kbits/s. <br>
            l'image ci-dessous récapitule l'encodage d'un signal sonore.
          </p>

          <div class="ModalImage">
            <img src="images/Com/BitsTransmis.jpg" alt="Encodage d'un signal sonore">
          </div><br>

          <h3>Protocoles réseaux</h3>
          <p>
            Le protocole réseau nous permet bien identifier chaque portion de signal à décoder et permet aussi des détecter des erreurs de transmissions potentiels. Pour identifier chaque trame nous avons un bit de start, un bit de stop, un idendificateur avec le numéro de trame, un bit de parité et finalement le segment. Le segment qui contient la donnée avec le code correcteur de hamming par-dessus pour détecter les erreurs.<br>
            l'image ci-dessous récapitule la composition d'une trame.<br>
          </p>

          <div class="ModalImage">
            <img src="images/Com/ProtocoleReseau.jpg" alt="Composition d'une trame">
          </div><br>

          <h3>Programme en Python</h3>
          <p>
            Le programme en python nous permet de simuler l'envoie et la réception des données. c'est pourquoi nous avons un programme pour l'envoie et un autre pour la réception. <br>

            Le programme d'envoie va lire le message depuis un fichier texte et faire la conversion des caractères en binaires. il va ensuite découper la suite de bits pour obtenir des segments en y rajoutant le bits de contrôles de Hamming. Le programme va composer les trames comme vu plus haut. Enfin le programme va composer le signal sonore modulé et lire le son produit. <br>
            Voici le programme d'envoie complet.
          </p>

          <div class="CodeBlock">
            <pre class="Preformate">
              <code class="language-py">
                #coding:utf-8
                #///////////////////////IMPORT DES MODULES////////////////////////////////////////////////////////
                import pygame
                import wave
                import math
                import binascii
                import socket
                import time

                #//////////////////////////////PARTIE SOCKET///////////////////////////////////////////////////////

                host, port = ('localhost',5566)

                socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)

                #/////////////////////COMPOSITION DES TRAMES//////////////////////////////////////////////////////

                def decoupage(sequence,nb): # découpage de la données en octets

                    sequence = str(sequence)
                    segments = []

                    while len(sequence)%nb != 0:
                        sequence = sequence + '0'
                        print("WARNING, ajout de bit de bourrage")

                    for i in range(0,len(sequence),nb):
                        segments.append(sequence[i:i+nb])

                    return segments

                def hamming(decoupage): # ajout du code correcteur de hamming sur nos octets

                    if type(decoupage) != list:
                        tmp = []
                        for i in range(len(decoupage)):
                            tmp.append(int(decoupage[i]))
                        decoupage = tmp

                    decoupage.insert(0,1) # insertion bit de contôle 1
                    decoupage.insert(1,1) # insertion bit de contrôle 2
                    decoupage.insert(3,1) #insertion bit de contrôle 4
                    decoupage.insert(7,1) # insertion bit de control 8

                    if (decoupage[2]+decoupage[4]+decoupage[6]+decoupage[8]+decoupage[10])%2 == 0:
                        decoupage[0] = 0

                    if (decoupage[2]+decoupage[5]+decoupage[6]+decoupage[9]+decoupage[10])%2 == 0:
                        decoupage[1] = 0

                    if (decoupage[4]+decoupage[5]+decoupage[6]+decoupage[11])%2 == 0:
                        decoupage[3] = 0

                    if (decoupage[8]+decoupage[9]+decoupage[10]+decoupage[11])%2 == 0:
                        decoupage[7] = 0

                    return decoupage

                def numeroDeTrame(data,donnee):

                    number = 0

                    while 2**number < len(donnee)/8:
                        number +=1

                    liste = list(data)
                    n=2**number
                    x = bin(n)[2:]
                    c = bin(b)[2:]

                    liste_a = list(c)
                    liste.insert(0,c)

                    chaine = ''.join(str(i) for i in liste)
                    chaine = chaine.zfill((len(data)+number))
                    return list(chaine)

                def rs232(hamming): # application du protocole rs232 + ajout N° de trame

                    hamming.insert(len(hamming)+2,0)     # ajout du bit de parité
                    if hamming.count(1)%2 == 0:
                        hamming[-1] = 0
                    else:
                        hamming[-1] = 1

                    hamming.insert(0,1)                  # ajout du bit de start
                    hamming.insert(len(hamming)+2,1)     # ajout du bit de stop

                    if hamming[1] == '1':
                        hamming[0] = 0
                    elif hamming[1] == '0':
                        hamming[0] = 1

                    if hamming[-2] == '1':
                        hamming[-1] = 0
                    elif hamming[-2] == '0':
                        hamming[-1] = 1

                    hamming = ''.join(str(i) for i in hamming)
                    return hamming

                def StrBin(texte):

                    binaire = []
                    for n in texte:
                        binaire.insert(len(binaire)+1,bin(ord(n))[2:])

                        while len(binaire[-1]) < 8:
                            binaire[-1] = '0' + binaire[-1]

                    binaire = ''.join(binaire)
                    return binaire

                #programme principal
                config = open("E:/CESI/Projet/ondes/LeCode/config.txt","r")
                texte = config.read()
                print("\nVotre texte est : ",texte)
                texte = StrBin(texte)

                segments = decoupage(texte,8)
                b = 1
                for t in range(len(segments)):

                    segments[t] = hamming(segments[t])
                    segments[t] = numeroDeTrame(segments[t],texte)
                    segments[t] = rs232(segments[t])
                    print("\n",segments[t])
                    b +=1
                try:
                    socket.connect((host,port))
                    print("\nvous êtes connecté au serveur ;")
                    data = ' '.join(segments)
                    data = data.encode("utf8")
                    socket.sendall(data)
                except:
                    print("\nconnexion au serveur échouée :(")
                finally:
                    socket.close()

                #///////////////////////////PARTIE GÉNÉRATION DU SON/////////////////////////////////////////

                Donnee = ''.join(segments)
                TroisBits = decoupage(Donnee,3)

                print("\nCréation d'un fichier audio au format WAV (PCM 8 bits mono 8000 Hz)")

                NomFichier = 'son.wav'
                Monson = wave.open(NomFichier,'w') # instanciation de l'objet Monson

                nbCanal = 1    # mono
                nbOctet = 1    # taille d'un échantillon : 1 octet = 8 bits
                fech = 8000   # fréquence d'échantillonnage

                frequence = float(input('\nFréquence du son(Hz) ? '))
                niveau = 1              #float(input('Niveau du son du canal de gauche (0 à 1) ? '))

                nbEchantillon = int(len(Donnee)/3)

                parametres = (nbCanal,nbOctet,fech,nbEchantillon,'NONE','not compressed')# tuple
                Monson.setparams(parametres)    # création de l'en-tête (44 octets)

                print('\nVeuillez patienter...')

                amplitude = 0
                phi = 0

                for i in range(0,nbEchantillon):

                    if TroisBits[i][2] == '0':     #####################
                        phi = 0                  # Modulation de Phase
                    else:
                        phi = math.pi/2          #####################

                    if TroisBits[i][0:2] == '00':            ###########################
                        amplitude = 127.5*niveau*0.25
                    elif TroisBits[i][0:2] == '01':
                        amplitude = 127.5*niveau*0.5       # Modulation d'amplitude
                    elif TroisBits[i][0:2] == '10':
                        amplitude = 127.5*niveau*0.75
                    elif TroisBits[i][0:2] == '11':
                        amplitude = 127.5*niveau*1.0       ############################


                    valG = wave.struct.pack('B',int(128+amplitude*math.sin(2.0*math.pi *frequence *i/fech + phi)))
                    Monson.writeframes(valG) # écriture frame

                Monson.close()

                print("\nFichier son crée.\nNombre d'échantillons : {}\nFréquence d'échantillonage : {}\nDurée du son : {}".format(nbEchantillon,fech,nbEchantillon/fech))

                #//////////////////////////PARTIE LECTURE DU SON////////////////////////////////////////////////////////////////////////////

                pygame.mixer.init()
                pygame.mixer.Sound("son.wav").play()
                while pygame.mixer.get_busy():
                    # lecture en cours
                    pass



                time.sleep(500)
              </code>
            </pre>
          </div>

          <p><
            Dans un soucis nous n'avons pas pu travailler sur la réception du son par un ordinateur, Nous avons donc simuler en écrivant les trames dans un fichier texte. <br>

            Le programme de réception va lire le fichier texte avec les trames envoyées et reconvertir les bits en caractères. Le programme passe évidemment par la décomposition des trames ainsi que de tout les bits de contrôles.<br>
            Voici le programme de réception complet.
          </p>

          <div class="CodeBlock">
            <pre class="Preformate">
              <code class="language-py">
                #coding:utf-8
                import time


                code = open("E:/CESI/Projet/ondes/LeCode/data.txt",'r')
                LeCode = code.read()

                def number(donnee):
                    del donnee[1:-14]

                    return donnee

                def trame(number):
                    number.pop(0)
                    number.pop(-1)
                    number.pop(-1)

                    return number


                def octet(trame):

                    trame.pop(0)
                    trame.pop(0)
                    trame.pop(1)
                    trame.pop(4)
                    trame = ''.join(trame)

                    return trame

                LeCode = LeCode.split()
                print(LeCode)
                tampon = []

                for n in range(len(LeCode)):
                    LeCode[n] = list(LeCode[n])
                    tampon.append(octet(trame(number(LeCode[n]))))

                LeCode = tampon

                print("\n",LeCode)

                decimal = []

                for n in range(len(LeCode)):
                    LeCode[n] = list(LeCode[n])
                    tampon = 0
                    puissance = 7

                    for m in range(len(LeCode[n])):

                        if LeCode[n][m] == '1':
                            tampon += 2**puissance

                        puissance = puissance - 1
                    decimal.append(chr(tampon))

                decimal = ''.join(decimal)
                print("\n",decimal)


                time.sleep(500)
              </code>
           </pre>
          </div>
        </div>
      </div>

      <div class="ModalBDD" id="ModalBDD">
        <div class="ModalContent">
          <a href="#" class="ModalClose"><i class="far fa-times-circle"></i></a>
          <h2>Projet Base de donnée</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
      </div>

      <div class="ModalEmbq" id="ModalEmbq">
        <div class="ModalContent">
          <a href="#" class="ModalClose"><i class="far fa-times-circle"></i></a>
          <h2>Projet Système Embarqué</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
      </div>

      <div class="ModalContacts" id="ModalContacts">
        <div class="ModalContent">
          <a href="#" class="ModalClose"><i class="far fa-times-circle"></i></a>
          <h2>Contactez Moi !</h2>
          <div class="ContactsGrid">
            <i class="fab fa-linkedin"></i>
            <a href="https://www.linkedin.com/in/tanguy-delage-a085931a0/">Tanguy DELAGE</a>
            <i class="fas fa-envelope"></i>
            <a href="mailto:tanguy.delage@viacesi.fr">tanguy.delage@viacesi.fr</a>
            <i class="fas fa-phone-square"></i>
            <div>0661982334</div>
            <p></p>
          </div>
        </div>
      </div>

      <!--////////////////Modales (Contenu projets)///////////////////////////// -->
      <footer>
        <button onclick="window.location.href = '#ModalContacts';">Contactez Moi</button>
        <p>Merci de votre visite !</p>
      </footer>
    </div>
    <!-- ///////////////////Corp du site///////////////////////////////////////-->
  </body>

</html>
